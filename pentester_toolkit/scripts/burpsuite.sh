#!/bin/bash
# Author: Emma Heffernan
# Description: Headless BurpSuite Pro (License Required)

# Changing directory to Burpsuite
cd /burpsuite
# Taking in the user input for whether they have a license key 
read -e -p "WARNING: burpsuite pro license key is required to run. Do you have one? (y/n): " LICENSE_KEY
# If loop, taking the user input if 'y' is inputted it will then move onto the next user input
if [[ $LICENSE_KEY == "y" ]]; then
    # Gathering the user input for editing the config file
    read -e -p "Would you like to edit the config.xml? (y/n): " USER_INPUT
    # If user types 'y' they'll be then brought to edit the config file
    if [[ $USER_INPUT == "y" ]]; then
        # USing text editor vi to modify the file
        vi config.xml
    # Ending the If loop
    fi
    # Using java to open the headless burpsuite with max of 1GB of ram allowed
    java -Xmx1G -Djava.awt.headless=true -classpath burp.jar burp.StartBurp --unpause-spider-and-scanner --config-file=config.xml
else
    # Running --help for burpsuite as proof of installation
    java -Xmx1G -Djava.awt.headless=true -classpath burp.jar burp.StartBurp --help
    echo "Acquire a lisence key and try run again"
fi