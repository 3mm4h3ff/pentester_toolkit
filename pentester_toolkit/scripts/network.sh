#!/bin/bash
# Author: Emma Heffernan
# Description: 

IP_INPUT=""
FILE_NAME=""

TOOL_EXIT=0
TEXT_AGAIN="continue"
TIME_DATE=`date +%y%m%d_%H%M`
echo "WARNING: Entire Network Scan can take a long time."
while [ $TOOL_EXIT == 0 ]; do 
    read -e -p "Do you want to ${TEXT_AGAIN}? (y/n): " NET_SCAN
    TEXT_AGAIN="scan again"
    if [[ $NET_SCAN == "y" ]]; then
        read -e -p "Enter your IP with Subnet Mask (i.e. /24, /30 etc.): " IP_INPUT
        read -e -p "Please enter a filename for results (Default: scan_result_$TIME_DATE) (NOTE: Do Not Add File Extension):" FILE_NAME
        FILE_NAME=${FILE_NAME:-"scan_result_${TIME_DATE}"}
        nmap $IP_INPUT -oA $FILE_NAME
        echo "Result files written to:"
        echo "`ls ${FILE_NAME}*`"
    else 
        TOOL_EXIT=1
    fi
done