#!/bin/bash
# Author: Emma Heffernan
# Description: Menu to prompt user for basic inputs to NMAP commands

# Initialising the toolexit variable to equal 0
TOOL_EXIT=0
# Running until the user wants to exit the tool
while [ $TOOL_EXIT == 0 ]; do 

    # Initialising the variables
    NMAP_PORT=""
    NMAP_IP=""
    NMAP_CONF=""

    # Creating titles and options list for user input
    echo ""
    echo "NMAP Helper"
    echo ""
    echo "Please select 1 of the following options: "
    echo ""
    echo " 1. Basic Port Scan"
    echo " 2. Operating System Detection"
    echo " 3. System Version Detection"
    echo " 4. Enter Bash Terminal"
    echo " 0. Exit NMAP Helper"

    # Intaking the user input for above options
    read -e -p "Please enter an option: " USER_INPUT
    # Rely to the user what they entered
    echo "You entered: $USER_INPUT" 
    
    # Matching the options in the menu above, the user can input their option choice, first here being to exit the problem
    if [[ $USER_INPUT == 0 ]]; then
        TOOL_EXIT=1
    # The user can scan a port and IP
    elif [[ $USER_INPUT == 1 ]]; then
        read -e -p "Enter IP: " NMAP_IP
        read -e -p "Enter Port: " NMAP_PORT
    # The user can scan a port and IP and operating system
    elif [[ $USER_INPUT == 2 ]]; then
        read -e -p "Enter IP: " NMAP_IP
        read -e -p "Enter Port: " NMAP_PORT
        NMAP_CONF="-O"
    # User can scan port, IP and show system versions
    elif [[ $USER_INPUT == 3 ]]; then
        read -e -p "Enter IP: " NMAP_IP
        read -e -p "Enter Port: " NMAP_PORT
        NMAP_CONF="-sV"
    # The user can enter a bash terminal and enter their own nmap commands
    elif [[ $USER_INPUT == 4 ]]; then
         /home/scripts/bash.sh    
    else
        echo "Incorrect option, please try again!"
    fi
        # if user enters 0 if will exit however if the value is greater it will run the nmap command with all variables attached
    if [[ TOOL_EXIT != 0 ]]; then
        nmap $NMAP_CONF -p $NMAP_PORT $NMAP_IP
    fi
# End of the do while loop
done
